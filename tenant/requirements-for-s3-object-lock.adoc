---
permalink: tenant/requirements-for-s3-object-lock.html 
sidebar: sidebar 
keywords: storagegrid, tenant, s3 bucket, s3 object, S3 Object Lock, s3 object lock requirements 
summary: 在为存储分段启用 S3 对象锁定之前，请查看 S3 对象锁定存储分段和对象的要求以及启用了 S3 对象锁定的存储分段中对象的生命周期。 
---
= S3 对象锁定的要求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在为存储分段启用 S3 对象锁定之前，请查看 S3 对象锁定存储分段和对象的要求以及启用了 S3 对象锁定的存储分段中对象的生命周期。



== 启用了 S3 对象锁定的存储分段的要求

* 如果为 StorageGRID 系统启用了全局 S3 对象锁定设置，则可以使用租户管理器，租户管理 API 或 S3 REST API 创建启用了 S3 对象锁定的分段。
+
此租户管理器示例显示了一个已启用 S3 对象锁定的存储分段。

+
image::../media/compliant_bucket.png[合规存储分段示例]

* 如果您计划使用 S3 对象锁定，则必须在创建存储分段时启用 S3 对象锁定。您不能为现有存储分段启用 S3 对象锁定。
* S3 对象锁定需要分段版本。为存储分段启用 S3 对象锁定后， StorageGRID 会自动为该存储分段启用版本控制。
* 在启用了 S3 对象锁定的情况下创建存储分段后，无法禁用 S3 对象锁定或暂停该存储分段的版本控制。
* 启用了S3对象锁定的StorageGRID 存储分段没有默认保留期限。相反、S3客户端应用程序可以选择为添加到存储分段的每个对象版本指定保留日期和合法保留设置。
* S3 对象生命周期分段支持分段生命周期配置。
* 启用了 S3 对象锁定的存储分段不支持 CloudMirror 复制。




== 启用了 S3 对象锁定的分段中的对象的要求

* S3客户端应用程序必须为需要受S3对象锁定保护的每个对象指定保留设置。
* 您可以增加对象版本的保留截止日期，但不能减小此值。
* 如果您收到有关待定法律诉讼或监管调查的通知，则可以通过对对象版本进行法律保留来保留相关信息。如果对象版本处于合法保留状态，则无法从 StorageGRID 中删除该对象，即使该对象已达到保留日期。一旦取消合法保留，如果已达到保留日期，则可以删除对象版本。
* S3 对象锁定需要使用版本控制的分段。保留设置适用于各个对象版本。对象版本可以同时具有保留截止日期和合法保留设置，但不能具有其他设置，或者两者均不具有。为对象指定保留日期或合法保留设置仅保护请求中指定的版本。您可以创建新版本的对象，而先前版本的对象仍保持锁定状态。




== 启用了 S3 对象锁定的存储分段中的对象生命周期

保存在启用了 S3 对象锁定的存储分段中的每个对象将经历三个阶段：

. * 对象载入 *
+
** 在启用了 S3 对象锁定的情况下，将对象版本添加到存储分段时， S3 客户端应用程序可以选择为此对象指定保留设置（ retene-until date ， legal hold 或两者）。然后， StorageGRID 会为此对象生成元数据，其中包括唯一对象标识符（ UUID ）以及载入日期和时间。
** 载入具有保留设置的对象版本后，将无法修改其数据和 S3 用户定义的元数据。
** StorageGRID 存储的对象元数据与对象数据无关。它会为每个站点上的所有对象元数据维护三个副本。


. * 对象保留 *
+
** StorageGRID 会存储该对象的多个副本。副本的确切数量和类型以及存储位置取决于活动 ILM 策略中的合规规则。


. * 对象删除 *
+
** 达到保留截止日期后，可以删除对象。
** 无法删除处于合法保留状态的对象。



