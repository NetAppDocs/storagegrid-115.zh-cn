---
permalink: ilm/simulating-ilm-policy.html 
sidebar: sidebar 
keywords:  
summary: 在激活测试对象并将其应用于生产数据之前，您应先模拟建议的策略。模拟窗口提供了一个独立的环境，可在激活策略并将其应用于生产环境中的数据之前安全地对策略进行测试。 
---
= 模拟ILM策略
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在激活测试对象并将其应用于生产数据之前，您应先模拟建议的策略。模拟窗口提供了一个独立的环境，可在激活策略并将其应用于生产环境中的数据之前安全地对策略进行测试。

.您需要的内容
* 您必须使用支持的浏览器登录到网格管理器。
* 您必须具有特定的访问权限。
* 您必须知道要测试的每个对象的S3存储分段/对象密钥或Swift容器/对象名称、并且必须已载入这些对象。


.关于此任务
您必须仔细选择要测试建议策略的对象。要全面模拟策略，您应至少为每个规则中的每个筛选器测试一个对象。

例如，如果某个策略包含一个规则来匹配存储分段 A 中的对象，另一个规则来匹配存储分段 B 中的对象，则必须从存储分段 A 中至少选择一个对象，并从存储分段 B 中选择一个对象来全面测试该策略。如果此策略包含放置所有其他对象的默认规则、则必须至少测试另一个存储分段中的一个对象。

模拟策略时，应考虑以下注意事项：

* 更改策略后，保存建议的策略。然后，模拟已保存的建议策略的行为。
* 模拟策略时，策略中的 ILM 规则会筛选测试对象，以便您可以查看对每个对象应用了哪个规则。但是，不会创建任何对象副本，也不会放置任何对象。运行模拟不会以任何方式修改数据，规则或策略。
* "Simulation" 页面会保留您测试的对象，直到您关闭，导航或刷新 "ILM Policies" 页面为止。
* Simulation 将返回匹配规则的名称。要确定哪个存储池或擦除编码配置文件有效、您可以通过单击规则名称或更多详细信息图标来查看保留图 image:../media/icon_nms_more_details.gif["更多详细信息图标"]。
* 如果启用了 S3 版本控制，则只会根据对象的当前版本模拟策略。


.步骤
. 选择并排列规则，然后保存建议的策略。
+
此示例中的策略有三个规则：

+
[cols="1a,1a,1a,1a"]
|===
| 规则名称 | 筛选器 | 副本类型 | Retention 


 a| 
X-men
 a| 
** 租户 A
** 用户元数据（系列 =x-men ）

 a| 
在两个数据中心创建 2 个副本
 a| 
2 年



 a| 
PNGs
 a| 
密钥以 .png 结尾
 a| 
在两个数据中心创建 2 个副本
 a| 
5 年



 a| 
两个副本两个数据中心
 a| 
无 _
 a| 
在两个数据中心创建 2 个副本
 a| 
永久

|===
+
image:../media/ilm_policies_viewing_proposed.png["ILM 策略查看建议的"]

. 单击*模拟*。
+
此时将显示模拟 ILM 策略对话框。

. 在*对象*字段中、输入测试对象的S3存储分段/对象密钥或Swift容器/对象名称、然后单击*模拟*。
+
[NOTE]
====
如果指定的对象尚未被载入，则会显示一条消息。

image::../media/object_not_available_for_simulation.gif[指定缺少对象时的消息]

====
. 在 * 模拟结果 * 下，确认每个对象都符合正确的规则。
+
在此示例中、将显示 `Havok.png` 和 `Warpath.jpg` 对象已通过X-men规则正确匹配。。 `Fullsteam.png` 对象、其中不包括 `series=x-men` 用户元数据、未与X-men规则匹配、但已与PNGs规则正确匹配。未使用默认规则，因为这三个对象都与其他规则匹配。

+
image::../media/ilm_policy_simulation_results.gif[模拟结果]


