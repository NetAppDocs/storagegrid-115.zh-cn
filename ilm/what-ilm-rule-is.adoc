---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords:  
summary: 要管理对象，您需要创建一组信息生命周期管理 \ （ ILM ）规则并将其组织到 ILM 策略中。系统中载入的每个对象都会根据活动策略进行评估。如果策略中的规则与对象的元数据匹配，则规则中的说明将确定 StorageGRID 复制和存储该对象所采取的操作。 
---
= 什么是 ILM 规则
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
要管理对象，您需要创建一组信息生命周期管理（ ILM ）规则，并将其组织到 ILM 策略中。系统中载入的每个对象都会根据活动策略进行评估。如果策略中的规则与对象的元数据匹配，则规则中的说明将确定 StorageGRID 复制和存储该对象所采取的操作。

ILM 规则定义：

* 应存储哪些对象。规则可以应用于所有对象，也可以指定筛选器来标识规则适用场景 中的对象。例如，规则只能应用于与特定租户帐户，特定 S3 分段或 Swift 容器或特定元数据值关联的对象。
* 存储类型和位置。对象可以存储在存储节点，云存储池或归档节点上。
* 创建的对象副本的类型。可以复制副本或对副本进行纠删编码。
* 对于复制的副本，为创建的副本数。
* 对于纠删编码副本，使用纠删编码方案。
* 对象的存储位置和副本类型会随时间发生变化。
* 在将对象载入网格时如何保护对象数据（同步放置或双提交）。


请注意，对象元数据不受 ILM 规则管理。而是将对象元数据存储在 Cassandra 数据库中，该数据库称为元数据存储。每个站点会自动维护三个对象元数据副本，以防止数据丢失。这些副本会均匀分布在所有存储节点上。



== ILM 规则的要素

ILM 规则包含三个要素：

* * 筛选条件 * ：规则的基本和高级筛选器用于定义规则适用场景 的对象。如果某个对象与所有筛选器匹配，则 StorageGRID 将应用此规则并创建在规则的放置说明中指定的对象副本。
* * 放置说明 * ：规则的放置说明用于定义对象副本的数量，类型和位置。每个规则都可以包含一系列放置说明，以便随着时间的推移更改对象副本的数量，类型和位置。一个放置的时间段到期后，下一个放置中的说明将自动应用于下一个 ILM 评估。
* * 载入行为 * ：规则的载入行为定义了 S3 或 Swift 客户端将对象保存到网格时发生的情况。载入行为用于控制是否按照规则中的说明立即放置对象副本，或者是否创建了临时副本并稍后应用放置说明。




== ILM 规则示例

此示例 ILM 规则适用场景 属于租户 A 的对象它会为这些对象创建两个复制副本，并将每个副本存储在不同的站点上。这两个副本会保留 "`Forever ，` " ，这意味着 StorageGRID 不会自动删除它们。相反， StorageGRID 将保留这些对象，直到客户端删除请求或存储分段生命周期到期时将其删除为止。

此规则对载入行为使用平衡选项：租户 A 将对象保存到 StorageGRID 后，系统会立即应用双站点放置指令，除非无法立即创建所需的两个副本。例如，如果租户 A 保存对象时无法访问站点 2 ，则 StorageGRID 将在站点 1 的存储节点上创建两个临时副本。一旦站点 2 可用， StorageGRID 就会在该站点创建所需的副本。

image::../media/ilm_example_rule_2_copies_tenant_a.png[示例 ILM 规则 2 复制租户 A]

.相关信息
link:data-protection-options-for-ingest.html["用于载入的数据保护选项"]

link:what-storage-pool-is.html["什么是存储池"]

link:what-cloud-storage-pool-is.html["什么是云存储池"]

link:how-objects-are-stored-replication-erasure-coding.html["对象的存储方式（复制或纠删编码）"]

link:what-ilm-rule-filtering-is.html["什么是 ILM 规则筛选"]

link:what-ilm-placement-instructions-are.html["什么是 ILM 规则放置说明"]
